{"author":{"id":"a99b826294359757366d8d53a41dce5cf8e99657f3b1ce221b354e6a92dc7007"},"ops":[{"type":3,"timestamp":1622630926,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDg1MjkyNDY2NQ==","github-url":"https://github.com/MichaelMure/git-bug/issues/653#issuecomment-852924665"},"nonce":"wKvjSpemUtPkPy5SJ0HhRH+GZ+E=","message":"@MichaelMure I fiddled around with your PR on my own fork. I think I found the Problem with the WebUI.\nThe WebUI passes the CommentId (the TimelineId of type CombinedId) to the Target of the EditCommentMutation.\nThis Id was then passed wrongly around. Instead the Resolver has to extract the OperationId of the CommentId and pass this OpId around. I fixed this and now the WebUI fails with the same error as the TermUI.\n\nOne problem left, the extracted OpId is only a Prefix and will fail the id validation due to \"invalid length\"... :'(","files":null},{"type":6,"timestamp":1622631105,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDY1OTcwMjI1"},"nonce":"LTGR7axL2wgfJmkPSQmFU51bRmE=","target":"0f6dbd1ce53dd65b101646c9ae941288f88073ea07626f31b09ea2e5954e17df","message":"@MichaelMure I fiddled around with your PR on my own fork. I think I found the Problem with the WebUI.\nThe WebUI passes the CommentId (the TimelineId of type CombinedId) to the Target of the EditCommentMutation.\nThis Id was then passed wrongly around. Instead the Resolver has to extract the OperationId of the CommentId and pass this OpId around. I fixed this and now the WebUI fails with the same error as the TermUI.\n\n**One problem left,** the extracted OpId is only a Prefix and will fail the id validation due to \"invalid length\"... :'(","files":null},{"type":6,"timestamp":1622633756,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDY1OTgxNzMy"},"nonce":"ktFSQydkLOSVmgcZVtyVYO5NPA8=","target":"0f6dbd1ce53dd65b101646c9ae941288f88073ea07626f31b09ea2e5954e17df","message":"@MichaelMure I fiddled around with your PR on my own fork. I think I found the Problem with the WebUI.\nThe WebUI passes the CommentId (the TimelineId of type CombinedId) to the Target of the EditCommentMutation.\nThis Id was then passed wrongly around. Instead the Resolver has to extract the OperationId of the CommentId and pass this OpId around. I fixed this and now the WebUI fails with the same error as the TermUI.\n\n**One problem left,** the extracted OpId is only a Prefix and will fail the id validation due to \"invalid length\"... :'(\n(Possible relevant note by Michael was given here: https://github.com/GlancingMind/git-bug/pull/57#issuecomment-852936828)","files":null},{"type":3,"timestamp":1622650332,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDg1MzE1OTg0NQ==","github-url":"https://github.com/MichaelMure/git-bug/issues/653#issuecomment-853159845"},"nonce":"d9hfKswYiIZa+bQ5K5a122Kv9dE=","message":"Got it! Editing of comments via CLI, TermUI and WebUI work again. https://github.com/GlancingMind/git-bug/pull/57\nUnfortunately the fix looks rather bad... duplicating the same code in three different places scream for a better solution.\nI could remove the redundant code by placing it into EditCommentOperation::Apply, but then the EditCommentOperationTarget \nmust be a CombinedId. Making the Target a TimelineItem rather than an Operation.\n\nSide Note: Is the separation of a TimelineItem and an Operation needed or could an Operation not be a TimelineItem?","files":null},{"type":6,"timestamp":1622650357,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDY2MDc3OTEw"},"nonce":"dwKgOnYQMaK4aiPnFk+2qX9Qmk0=","target":"050f45d0802727ddc144bd0292a8d0a3043e51ec8441b850503b07080f060a79","message":"Got it! Editing of comments via CLI, TermUI and WebUI work again. https://github.com/GlancingMind/git-bug/pull/57\nUnfortunately the fix looks rather bad... duplicating the same code in three different places screams for a better solution.\nI could remove the redundant code by placing it into EditCommentOperation::Apply, but then the EditCommentOperationTarget \nmust be a CombinedId. Making the Target a TimelineItem rather than an Operation.\n\nSide Note: Is the separation of a TimelineItem and an Operation needed or could an Operation not be a TimelineItem?","files":null},{"type":6,"timestamp":1622731857,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDY2NDE0MzY4"},"nonce":"WhXeSG6tvm8kKhnYP6JCE17/drY=","target":"050f45d0802727ddc144bd0292a8d0a3043e51ec8441b850503b07080f060a79","message":"Got it! Editing of comments via CLI, TermUI and WebUI work again. ~https://github.com/GlancingMind/git-bug/pull/57~ https://github.com/GlancingMind/git-bug/pull/61\nUnfortunately the fix looks rather bad... duplicating the same code in ~three~ four different places screams for a better solution.\nI could remove the redundant code by placing it into EditCommentOperation::Apply, but then the EditCommentOperationTarget \nmust be a CombinedId. Making the Target a TimelineItem rather than an Operation.\n\nSide Note: Is the separation of a TimelineItem and an Operation needed or could an Operation not be a TimelineItem?","files":null}]}